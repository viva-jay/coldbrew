steps:
#  - name: gcr.io/$PROJECT_ID/docker-compose
#    env:
#      - 'K6_CLOUD_TOKEN=${_K6_CLOUD_TOKEN}'
#    args: ['run',
#           'k6',
#           'run',
#           '--no-connection-reuse',
#           '--insecure-skip-tls-verify',
#           '--no-teardown',
#           '--no-thresholds',
#           '--no-setup',
#           '--no-usage-report',
#           '--quiet',
#           '--out',
#           'cloud',
#           '/scripts/script.js']

  # Deploy container image to Cloud Run
  - name: gcr.io/google.com/cloudsdktool/cloud-sdk
    entrypoint: gcloud
    timeout: 10s
    args: [
        'run',
        'deploy,','SERVICE-NAME',
        '--image','gcr.io/$PROJECT_ID/$_SERVICE_NAME:$BRANCH_NAME',
        '--region','$_REGION']
# store artifact
images:
  - 'gcr.io/$PROJECT_ID/$_SERVICE_NAME:$BRANCH_NAME'

# arguments
substitutions:
  _SERVICE_NAME:  'mock-server'
  _REGION:  'asia-northeast2'